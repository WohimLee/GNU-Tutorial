## GNU 与 GCC


### 1 GNU 是什么？

`GNU = "GNU's Not Unix"`（递归缩写）

- **起源**：1983 年由 Richard Stallman 发起的自由软件计划，目标是创建一个 **完全自由的类 Unix 操作系统**
- **核心思想**：用户应当拥有使用、研究、修改和分发软件的自由
- **GNU 提供的基础工具**：
  - **GNU C 库（glibc）** → 提供系统调用接口和标准 C 函数库  
  - **GNU 编译器套件（GCC）**  
  - **GNU 调试器（GDB）**  
  - **GNU Binutils**（汇编器、链接器、目标文件操作工具）  

- GNU 的内核 **Hurd** 并未成功取代 Linux 内核，但与 **Linux 内核**结合，形成了我们熟知的 **GNU/Linux 系统**（通常简称为 Linux）



### 2 GCC 是什么？

- **官网**：[GCC Online Docs](https://gcc.gnu.org/onlinedocs/)  
- **定义**：`GCC = GNU Compiler Collection`（GNU 编译器套件）  
- **历史**：最初只是 `GNU C Compiler`，后来扩展支持了多种语言，所以改名为 **Collection**
- **支持的语言**：
  - C  
  - C++  
  - Objective-C  
  - Fortran  
  - Ada  
  - Go  
  - Rust（实验性支持）  

>作用
- 把源代码（C/C++ 等）编译为 **汇编 → 机器码 → 可执行文件**
- 支持跨平台、跨架构（ARM、x86、RISC-V 等）
- 提供多级优化（`-O1` / `-O2` / `-O3` / `-Ofast` 等）

>意义
- GCC 是自由软件运动的基石
  - 几乎所有开源软件在某种层次上依赖 GCC
  - 许多语言（如 Python 解释器本身）也是由 C 编写并通过 GCC 编译的
  - 没有 GCC，就不会有如今的 Linux 生态和自由软件运动



### 3 GCC 的组成部分

GCC 既包括核心编译器，也包括配套工具和库：

##### 编译器与前端
- **gcc**：核心驱动程序，控制编译、汇编和链接过程
- **g++**：GCC 的 C++ 前端，自动启用 C++ 语法并链接标准 C++ 库
- **c++**：与 `g++` 等价的命令别名

##### 配置与构建工具
- **configure**：GCC 源代码树中的配置脚本，用于生成适配目标平台的 Makefile
- **make**：构建工具，读取 `Makefile`，按依赖关系自动编译与链接

##### 库
- **libgcc**：编译器运行时支持库，包含基本例程（如整数除法、浮点运算），通常平台相关
- **libstdc++**：C++ 标准运行时库，包含 STL 容器、算法、IOStream 等 



### 4 GCC 相关的常见工具

这些工具大多来自 GNU Binutils 和 GNU 工具链：

- **ar**：静态库管理工具，用于创建、修改、提取 `.a` 格式的目标库文件
- **as**：GNU 汇编器，支持多平台
- **ld**：GNU 链接器，把目标文件 `.o` 和库组合为可执行文件或共享库
- **gdb**：GNU 调试器，用于程序运行时的调试和状态检查
- **gprof**：性能分析工具，统计函数调用和执行时间，用于性能优化
- **libtool**：简化共享库的使用和构建的脚本工具
- **autoconf**：自动生成配置脚本，使软件能在不同类 Unix 平台编译
- **GNATS**：GNU Bug Tracking System，用于跟踪 GCC 和其他 GNU 软件的问题



### 5 GCC 默认头文件搜索路径

GCC 编译 C/C++ 程序时，会在一系列目录中搜索头文件, 可以通过命令查看：

```bash
echo | gcc -v -x c -E -
```

常见的默认搜索路径（不同版本、系统可能有所差异）：

- `/usr/lib/gcc/x86_64-linux-gnu/7/include`  
- `/usr/local/include`  
- `/usr/lib/gcc/x86_64-linux-gnu/7/include-fixed`  
- `/usr/include/x86_64-linux-gnu`  
- `/usr/include`  

